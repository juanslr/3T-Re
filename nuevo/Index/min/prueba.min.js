"use strict";document.addEventListener("DOMContentLoaded",function(){realizarPeticionAsincronaMYSQL()});function objetoXHR(){if(window.XMLHttpRequest){return new XMLHttpRequest}else if(window.ActiveXObject){var versionesIE=new Array("MsXML2.XMLHTTP.5.0","MsXML2.XMLHTTP.4.0","MsXML2.XMLHTTP.3.0","MsXML2.XMLHTTP","Microsoft.XMLHTTP");for(var i=0;i<versionesIE.length;i++){try{return new ActiveXObject(versionesIE[i])}catch(errorControlado){console.log(errorControlado)}}}throw new Error("No se pudo crear el objeto XMLHTTPRequest")}function realizarPeticionAsincronaMYSQL(){var divResultado=document.getElementById("resultado");divResultado.innerHTML="";document.getElementById("spinner").style="display:block";var miXHR=new objetoXHR;miXHR.open("GET","servidor/datosMYSQL.php",true);miXHR.onreadystatechange=comprobarEstadoPeticion;miXHR.send(null)}function realizarPeticionAsincronaPDO(){var divResultado=document.getElementById("resultado");divResultado.innerHTML="";var miXHR=new objetoXHR;miXHR.open("GET","servidor/datosPDO.php",true);miXHR.onreadystatechange=comprobarEstadoPeticion;miXHR.send(null)}function comprobarEstadoPeticion(){switch(this.readyState){case 4:if(this.status==200){crearTablaJSON(this.responseText)}else{alert("HA HABIDO UN ERROR. INTENTELO MAS TARDE.")}document.getElementById("spinner").style="display:none";break}}function crearTablaJSON(respuesta){var divResultado=document.getElementById("resultado");divResultado.innerHTML="";document.getElementById("spinner").style="display:block";var resultados=JSON.parse(respuesta);var salida="<table class=table border='2'><tr><th>NOMBRE</th><th>apellido1</th><th>apellido2</th><th>email</th><th>direccion</th><th>cp</th><th>pais</th><th>provincia</th><th>ciudad</th></tr>";for(var i=0;i<resultados.length;i++){var objeto=resultados[i];salida+="<tr><td>"+objeto.nombre+"</td><td>"+objeto.apellido1+"</td><td>"+objeto.apellido2+"</td><td>"+objeto.email+"</td><td>"+objeto.direccion+"</td><td>"+objeto.cp+"</td><td>"+objeto.pais+"</td><td>"+objeto.provincia+"</td><td>"+objeto.ciudad+"</td></tr>"}salida+="</table>";divResultado.innerHTML=salida}